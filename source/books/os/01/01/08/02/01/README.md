# 初始化

在使用 APT 之前，需要更新可用软件包的列表；这可以通过 `apt update` 命令简单地完成。根据你的连接速度和配置，这个操作可能需要一些时间，因为它涉及下载一定数量的（通常是压缩过的）文件（`Packages`、`Sources`、`Translation-_language-code_`），这些文件随着 Debian 的发展而变得越来越大（至少 10-16 MB 的数据用于 `main` 部分）。当然，从 CD-ROM/DVD 安装时不需要下载任何内容——在这种情况下，操作非常快速。

**_提示_ 增量更新**

`apt update` 命令的目的是为每个软件包源下载相应的 `Packages`（或 `Sources`）文件。然而，即使经过 `xz` 压缩，这些文件仍然可能相当大（Unstable 中的 _main_ 部分的 `Packages.xz` 文件超过 8 MB）。如果你希望定期更新，这些下载可能会占用很多时间。

为了加快这一过程，APT 可以下载包含自上次更新以来变化的“diff”文件，而不是下载整个文件。为此，官方的 Debian 镜像站会分发不同的文件，这些文件列出了一个版本的 `Packages` 文件与下一个版本之间的差异。这些差异文件在每次更新档案时生成，并且会保留一周的历史记录。每个“diff”文件通常只有几十 KB，因此每周运行一次 `apt update` 下载的数据量通常减少了 10 倍左右。对于变化较少的 Stable 和 Testing，节省的时间甚至更加明显。

然而，有时强制下载整个 `Packages` 文件也可能是有意义的，尤其是在最后一次升级非常旧的时候，而增量差异机制对此贡献不大。当网络访问非常快速但升级的机器处理器较慢时，这也可能是有意义的，因为下载节省的时间往往比计算这些文件的新版本时损失的时间还要多（从旧版本开始并应用下载的差异）。要做到这一点，你可以使用 APT 配置参数 `Acquire::PDiffs` 并将其设置为 `false`。

```
$ sudo apt -o "Acquire::PDiffs=false" update
```

`Acquire::*` 选项还控制其他下载方面，甚至下载方法。`Acquire::Languages` 可以限制或禁用 `Translation-_language-code_` 文件的下载，从而节省更多时间。有关完整的参考，请参见 `apt.conf(5)`。