# 引导分区

引导分区工具提供了三种分区方法，适用于不同的使用场景。

![引导分区](https://www.debian.org/doc/manuals/debian-handbook/images.en/inst-autopartman-mode.png)

**图 4.9. 引导分区**

第一种方法叫做“所有文件放在一个分区中”。整个 Linux 系统树都存储在一个文件系统中，对应于根目录 `/`。这种简单且稳健的分区方式非常适合个人或单用户系统。实际上，将创建两个分区：第一个用于存储完整的系统，第二个用于存储虚拟内存（交换空间）。

第二种方法是“分开 `/home` 分区”，它与第一种方法相似，但将文件层次结构分为两部分：一个分区包含 Linux 系统（`/`），另一个分区包含“用户目录”（即用户数据，存储在 `/home/` 下的文件和子目录中）。

最后一种分区方法叫做“分开 `/home`、`/var` 和 `/tmp` 分区”，适用于服务器和多用户系统。它将文件树分为多个分区：除了根目录（`/`）和用户账户（`/home/`）分区外，还包括服务器软件数据分区（`/var/`）和临时文件分区（`/tmp/`）。这种划分有多个优点。用户无法通过占用全部硬盘空间来锁死服务器（他们只能填满 `/tmp/` 和 `/home/`）。守护进程数据（特别是日志文件）也不会堵塞系统的其他部分。

**_基础知识_ 选择文件系统**

文件系统定义了数据在硬盘上的组织方式。每种现有的文件系统都有其优缺点。有些文件系统更稳健，有些则更高效：如果您非常了解自己的需求，可以选择最合适的文件系统。已经有很多比较分析，结果显示 _ReiserFS_ 在读取大量小文件时特别高效；而 _XFS_ 在处理大文件时表现更好。Debian 的默认文件系统 _Ext4_ 是一个很好的折中方案，基于 Linux 历史上使用的三种文件系统版本（_ext_、_ext2_ 和 _ext3_）。_Ext4_ 克服了 _ext3_ 的某些限制，特别适合大容量硬盘。另一种选择是尝试前景广阔的 _btrfs_，它包括许多特性，至今仍需要使用 LVM 和/或 RAID。

日志文件系统（如 _ext3_、_ext4_、_btrfs_、_reiserfs_ 或 _xfs_）采取特别措施，以便在系统中断后可以返回到先前的一致状态，而无需完全分析整个磁盘（如同 _ext2_ 系统那样）。这一功能通过填写日志来执行，该日志记录了将在实际执行之前进行的操作。如果操作中断，可以从日志中“重放”操作。反之，如果中断发生在日志更新过程中，最后一次请求的更改会被简单地忽略；虽然写入的数据可能会丢失，但由于磁盘上的数据没有改变，它们仍然是一致的。这本质上就是一种应用于文件系统的事务机制。

在选择分区类型后，软件会计算出一个建议并在屏幕上显示；用户可以根据需要进行修改。特别地，如果标准的 _ext4_ 文件系统不适合，您可以选择其他文件系统。然而，在大多数情况下，建议的分区设置是合理的，可以通过选择“完成分区并将更改写入磁盘”来接受。

![验证分区](https://www.debian.org/doc/manuals/debian-handbook/images.en/inst-partman-validation.png)

**图 4.10. 验证分区**